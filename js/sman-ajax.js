jQuery(document).ready(function($) {        /*Disable the "Mark as Complete" button by default*/    /*$('.learndash_mark_complete_button').addClass('disable-mark-complete');*/    try {        // console.log("READY", sman_ajax_obj);        var allowUpdate = sman_ajax_obj.allow_update == '1' ? true : false;        var learn_dash_mark_as_complete = sman_ajax_obj.learn_dash_mark_as_complete == '1' ? true : false;        var responseText = $('#sman-response').val();        var minChars = $('#sman-response').data('minchars');        if (responseText == "") {            if (!learn_dash_mark_as_complete) {                $('body').removeClass("sman-shortcode");            } else {                $('body').addClass("sman-shortcode");            }        } else {            /*if(!learn_dash_mark_as_complete){*/            $('body').removeClass("sman-shortcode");            /*}*/        }        // console.log('....');        $('#sman-submit').on('click', function(e) {            $("body, textarea, button").css("cursor", "progress");            $("textarea").attr("disabled", true);            $("textarea, button").css("pointer-events", "none");            $(".saveBtnTxt").toggleClass("d-none");            e.preventDefault();            var questionId = $('#sman-response').data('questionid');            if (responseText.length < minChars) {                $('#sman-error').html(sman_ajax_obj.min_chars_error_message + responseText.length);                $('#sman-success').html('');                $("body, textarea, button").css("cursor", "default");                $("textarea").attr("disabled", false);                $("textarea, button").css("pointer-events", "all");                $(".saveBtnTxt").toggleClass("d-none");            } else {                $.ajax({                    type: 'POST',                    url: sman_ajax_obj.ajax_url,                    data: {                        action: 'sman_save_response',                        nonce: sman_ajax_obj.nonce,                        question_id: questionId,                        user_id: sman_ajax_obj.user_id,                        response_text: responseText,                        min_chars: minChars,                        allowUpdate: allowUpdate                    },                    success: function(response) {                        $("body, textarea, button").css("cursor", "default");                        $("textarea").attr("disabled", false);                        $("textarea, button").css("pointer-events", "all");                        $(".saveBtnTxt").toggleClass("d-none");                        if (!allowUpdate) {                            $("#sman-submit").remove();                            $("#sman-response").attr('readonly', 'readonly');                        }                        if (response.success) {                            $('#sman-success').html(response.data.message);                            $('#sman-error').html('');                            if (learn_dash_mark_as_complete) {                                $('body').removeClass("sman-shortcode");                            }                            /* if (allowUpdate) {                            //     // Change the button caption to "Update" if updates are allowed                            //     $('#sman-submit').val('Update');                            //     // location.reload();                            // } else {                            //     // Set textarea to readonly and hide the submit button if updates are not allowed                            //     $('#sman-response').prop('readonly', true);                            //     // $('#sman-submit').hide();                            // }                            // $('#sman-submit').hide();                            // // Enable the "Mark as Complete" button                            // $('.learndash_mark_complete_button').removeClass('disable-mark-complete');*/                        } else {                            $('#sman-error').html(response.data.message);                            $('#sman-success').html('');                        }                    },                    error: function() {                        $("body, textarea, button").css("cursor", "default");                        $("textarea").attr("disabled", false);                        $("textarea, button").css("pointer-events", "all");                        $(".saveBtnTxt").toggleClass("d-none");                        $('#sman-error').html('An error occurred while processing your request.');                        $('#sman-success').html('');                        if (!allowUpdate) {                            $("#sman-submit").remove();                            $("textarea").attr("disabled", true);                            $("#sman-response").attr('readonly', 'readonly');                        }                    }                });            }        });        $('#sman-response').on('keyup', function() {            responseText = $('#sman-response').val();            if (responseText.length >= minChars) {                $('#sman-error').html('');                $('#sman-success').html('');            }        });    } catch (ex) {        console.error(ex);    }});